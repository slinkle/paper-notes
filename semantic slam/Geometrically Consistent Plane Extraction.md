# Geometrically consistent plane extraction for dense indoor 3D maps segmentation

Pham T T, Eich M, Reid I, et al. Geometrically consistent plane extraction for dense indoor 3D maps segmentation[C]// Ieee/rsj International Conference on Intelligent Robots and Systems. IEEE, 2016:4199-4204.

* 仅用几何信息的非监督3D点云地图分割算法：提取平面--墙和地面，分割物体--桌子椅子等

<div align="center">
<img src="https://i.loli.net/2018/08/13/5b70ef5792b77.png"  />
</div>

* 一种分割3D地图为物体的方法是CRF，这个方法需要大量的标注数据用于分类。而且，CRF推理阶段还需要很大的计算量。
* 本文提出一种非监督的几何方法可以将3D地图分割为一个一个的物体并给出场景语义结构信息
* 我们将输入的点云近似为一些表层碎片的邻接图，连接这些碎片的边被标注为是否属于同一物体，在对这个图进行聚类（graph clustering）时就可以完成物体的分割
* 在对边进行分类时，全局平面和局部surface convexities都被考虑在内
* 另外，我们提出了一种鲁棒的提取全局平面的算法，用于提取场景中的平面
* 并且保证提取的平面之间是正交或者平行的关系，更符合室内环境的构造

## 简介

本文的一个重要贡献是提出了一种全局平面拟合算法，可以提取具有几何连续一致性的平面。由于室内环境的平面之间往往是正交或者平行的，单独用类似RANSAC的方法提取平面难以保证这种几何约束关系。本文的方法是同时提取出所有可能的平面。我们将提取平面的问题建模为同时考虑plane fidelities和平面之间的geometric consistencies的能量最小化问题。

我们在提取平面时只会考虑室内结构相关的平面如地面，墙面和天花板，沙发椅背这种平面不会被提取。

## 基于图聚类的3D分割

1. 给出RGBD图片序列，我们先用一个全局能量最小化算法近似一个3D几何地图，包括提取的几何连续的平面和一系列表面碎片
2. 为了对场景完成分割，我们先对第一步得到的表面碎片构建一个邻接图，根据局部凹凸性和提取的平面区分碎片两两之间是否属于同一物体
3. 分类结束就会得到一些连接部分，分别代表物体（椅子），物体部分（桌面），室内结构（墙面）

### 近似表面碎片

使用supervoxel分割算法将点云过分割为表层碎片，每个碎片包含质心ci，法向量ni，曲率ui，并得到一个邻接图，图的边连接着相邻的碎片，我们用这个图进行场景分割。

### 基于图的场景分割

图分割问题，连接来自相同物体的碎片的边被标记为ON，剩下的标记为OFF。不断的从图中移除OFF的边，就分割出了物体或者物体的部分。有的工作通过估计点云的法向量判断凹凸性对碎片是否属于同一物体进行判断，但法向量的估计往往不准确，尤其是在物体边缘等存在大量噪声的部分。本文的方法结合提取的平面辅助判断，如果两个碎片属于同一个平面，则很可能是属于同一个物体，如果不属于同一平面，则他们一定是来自于不同的物体？？（可能因为RGBD只能捕捉到物体的一个表面）如果两个碎片都不属于任何平面，那就根据局部凹凸性进行判断。

## 几何连续的平面提取

不同于RANSAC一个一个提取场景中的平面，我们提出同时检测场景中的所有平面，然后区分任两个平面之间是正交还是平行的关系。首先产生一些可能的平面假设，再挑选其中具有最小全局能量的假设，如此既考虑平面的完备性又兼顾两两平面之间的连续性。

### 生成平面假设

我们根据前面得到的局部表面的碎片，选取其中曲率较低的碎片，再根据碎片的质心进行随机组合生成一些平面假设。

### 模型选择

对于一组平面，我们寻找一个可以合理安排这些平面关系的平面子集。


<div align="center">
<img src="https://i.loli.net/2018/08/13/5b715e83af7ca.png"  />
</div>

















